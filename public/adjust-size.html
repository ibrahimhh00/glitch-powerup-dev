<!DOCTYPE html>
<html lang="en">
<!-- ...rest of your head tag -->

<body>
  <div class="memberName" id="memberName"></div>
  <input class="inputSizing" type="text" id="sizingInput" />
  <button type="button" onclick="submitChanges()">Submit</button>

  <script type="text/javascript">
    var t = TrelloPowerUp.iframe();
    const API_URL = 'your-api-url-here'; // replace with your actual API URL

    async function submitChanges() {
      const urlParams = new URLSearchParams(window.location.search);

      const memberId = urlParams.get("memberId");
      const cardId = urlParams.get("cardId");
      const idList = urlParams.get("idList");
      const idBoard = urlParams.get("idBoard");
      const newSizing = document.getElementById("sizingInput").value;

      const data = {
        member: {
          memberId: memberId,
          sizing: newSizing,
          date: new Date(),
        },
        cardId: cardId,
        listId: idList,
        boardId: idBoard,
      };

      try {
        const response = await fetch(`${API_URL}/cards/`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        });

        if (response.ok) {
          console.log("Success:", await response.json());
          t.closePopup();
        } else {
          console.error("Server responded with status", response.status);
        }
      } catch (error) {
        console.error("Error:", error);
      }
    }
  </script>
</body>
</html>
